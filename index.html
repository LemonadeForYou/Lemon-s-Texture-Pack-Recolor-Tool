<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Bedrock Recolor Studio</title>

<!-- JSZip -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

<style>
:root {
  --accent: #ffd700;
  --accent-soft: #ffea80;
  --bg: #060606;
  --glass: rgba(255,215,0,0.12);
  --border: rgba(255,215,0,0.28);
}

* {
  box-sizing: border-box;
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
}

body {
  margin: 0;
  background: radial-gradient(circle at top, #1a1405, var(--bg));
  color: white;
  overflow-x: hidden;
}

/* TECH GRID */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background:
    linear-gradient(transparent 96%, rgba(255,215,0,.05)),
    linear-gradient(90deg, transparent 96%, rgba(255,215,0,.05));
  background-size: 28px 28px;
  z-index: -2;
}

/* GLOW ORBS */
.orb {
  position: fixed;
  width: 300px;
  height: 300px;
  filter: blur(120px);
  opacity: .35;
  z-index: -1;
}
.orb.one { background: var(--accent); top: -100px; left: -80px; }
.orb.two { background: #ffb300; bottom: -120px; right: -80px; }

header {
  text-align: center;
  padding: 16px;
  font-size: 20px;
  font-weight: 800;
}

/* MAIN */
main {
  padding: 16px;
  padding-bottom: 180px;
  max-width: 520px;
  margin: auto;
}

/* GLASS CARD */
.card {
  background: linear-gradient(
    180deg,
    rgba(255,215,0,0.14),
    rgba(255,215,0,0.04)
  );
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 16px;
  margin-bottom: 16px;
  backdrop-filter: blur(18px);
}

/* INPUTS */
input, button {
  width: 100%;
  margin-top: 10px;
}

input[type="file"],
input[type="text"] {
  background: rgba(0,0,0,0.45);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 12px;
  color: white;
}

/* FOLDERS */
.folder {
  padding: 12px;
  margin-top: 8px;
  border-radius: 14px;
  background: rgba(255,215,0,0.1);
  text-align: center;
  font-weight: 600;
}
.folder.active {
  outline: 2px solid var(--accent);
  box-shadow: 0 0 20px rgba(255,215,0,0.4);
}

/* PRESETS */
.presets {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}
.chip {
  padding: 8px 14px;
  border-radius: 999px;
  background: rgba(255,215,0,0.18);
  border: 1px solid var(--border);
  font-size: 13px;
}

/* PREVIEW */
.preview {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}
.preview img {
  width: 100%;
  border-radius: 16px;
  background: #000;
  padding: 8px;
  border: 1px solid var(--border);
  image-rendering: pixelated;
}

/* BUTTONS + RIPPLE */
button {
  padding: 14px;
  border-radius: 16px;
  border: none;
  font-weight: 800;
  background: linear-gradient(135deg, var(--accent), var(--accent-soft));
  color: #000;
  position: relative;
  overflow: hidden;
}

button.secondary {
  background: rgba(255,215,0,0.12);
  color: white;
  border: 1px solid var(--border);
}

/* RIPPLE */
button span {
  position: absolute;
  border-radius: 50%;
  transform: scale(0);
  animation: ripple 600ms linear;
  background: rgba(255,255,255,0.6);
}
@keyframes ripple {
  to {
    transform: scale(4);
    opacity: 0;
  }
}

/* BOTTOM SHEET */
.sheet {
  position: fixed;
  left: 0;
  right: 0;
  bottom: -280px;
  height: 280px;
  background: linear-gradient(
    180deg,
    rgba(255,215,0,0.2),
    rgba(255,215,0,0.08)
  );
  border-top: 1px solid var(--border);
  border-radius: 24px 24px 0 0;
  padding: 14px;
  backdrop-filter: blur(20px);
  transition: bottom .35s ease;
}

.sheet.open { bottom: 0; }

.handle {
  width: 44px;
  height: 5px;
  background: rgba(255,255,255,0.4);
  border-radius: 999px;
  margin: 0 auto 12px;
}
</style>
</head>

<body>

<div class="orb one"></div>
<div class="orb two"></div>

<header>âš¡ Bedrock Recolor Studio</header>

<main>

<div class="card">
  <input type="file" id="fileInput" accept=".zip,.mcpack">
</div>

<div class="card">
  <strong>Detected Folders</strong>
  <div id="folders"></div>
</div>

<div class="card">
  <strong>Presets</strong>
  <div class="presets" id="presets"></div>
  <button class="secondary" onclick="savePreset()">Save Current Preset</button>
</div>

<div class="card">
  <strong>Preview</strong>
  <div class="preview">
    <img id="before">
    <img id="after">
  </div>
</div>

</main>

<!-- BOTTOM SHEET -->
<div class="sheet" id="sheet">
  <div class="handle"></div>

  <input type="color" id="color" value="#ffd700">
  <input type="text" id="hex" value="#ffd700">

  <button onclick="toggleSheet()">Apply Recolor</button>
  <button class="secondary" onclick="download()">Download MCPACK</button>
</div>

<script>
/* RIPPLE EFFECT */
document.addEventListener("click", e => {
  if (e.target.tagName !== "BUTTON") return;
  const circle = document.createElement("span");
  const rect = e.target.getBoundingClientRect();
  const size = Math.max(rect.width, rect.height);
  circle.style.width = circle.style.height = size + "px";
  circle.style.left = e.clientX - rect.left - size/2 + "px";
  circle.style.top = e.clientY - rect.top - size/2 + "px";
  e.target.appendChild(circle);
  setTimeout(() => circle.remove(), 600);
});

/* BOTTOM SHEET */
const sheet = document.getElementById("sheet");
function toggleSheet() {
  sheet.classList.toggle("open");
}

/* PRESETS */
function loadPresets() {
  presets.innerHTML = "";
  Object.keys(localStorage).forEach(k => {
    if (!k.startsWith("preset_")) return;
    const chip = document.createElement("div");
    chip.className = "chip";
    chip.textContent = localStorage[k];
    chip.onclick = () => color.value = localStorage[k];
    chip.oncontextmenu = e => {
      e.preventDefault();
      localStorage.removeItem(k);
      loadPresets();
    };
    presets.appendChild(chip);
  });
}
function savePreset() {
  localStorage.setItem("preset_" + Date.now(), color.value);
  loadPresets();
}
loadPresets();

/* ZIP + AUTO DETECT */
fileInput.onchange = async e => {
  const zip = await JSZip.loadAsync(e.target.files[0]);
  const map = {};
  Object.keys(zip.files).forEach(p => {
    const parts = p.toLowerCase().split("/");
    if (parts.includes("blocks")) map.blocks = true;
    if (parts.includes("items")) map.items = true;
    if (parts.includes("entity")) map.entity = true;
    if (parts.includes("ui")) map.ui = true;
    if (parts.includes("models")) map.models = true;
    if (parts.includes("environment")) map.environment = true;
  });

  folders.innerHTML = "";
  Object.keys(map).forEach(f => {
    const d = document.createElement("div");
    d.className = "folder";
    d.textContent = f;
    folders.appendChild(d);
  });
};

/* DOWNLOAD STUB */
function download() {
  alert("Download logic placeholder (UI-focused build)");
}
</script>

</body>
</html>